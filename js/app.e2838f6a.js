(function(e){function t(t){for(var s,i,o=t[0],n=t[1],l=t[2],p=0,u=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var e,t=0;t<a.length;t++){for(var c=a[t],s=!0,o=1;o<c.length;o++){var n=c[o];0!==r[n]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=c[0]))}return e}var s={},r={app:0},a=[];function i(t){if(s[t])return s[t].exports;var c=s[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,i),c.l=!0,c.exports}i.m=e,i.c=s,i.d=function(e,t,c){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(i.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(c,s,function(t){return e[t]}.bind(null,s));return c},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/e-commerce-example-app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],n=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=n;a.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"015d":function(e,t,c){},"08e1":function(e,t,c){"use strict";c("3a28")},"15e4":function(e,t,c){},"3a28":function(e,t,c){},"3b95":function(e,t,c){"use strict";c("015d")},"896a":function(e,t,c){e.exports=c.p+"img/arrow-down.dd8157ef.svg"},"8c52":function(e,t,c){"use strict";c("15e4")},af4f:function(e,t,c){"use strict";c("cc2e")},b383:function(e,t,c){},bd24:function(e){e.exports=JSON.parse('{"categories":[{"name":"Furniture","categories":[{"name":"Sofas","categories":[]}]},{"name":"Electronics","categories":[{"name":"Mobile phones","categories":[]},{"name":"Photo, Video","categories":[{"name":"Digital cameras","categories":[]},{"name":"Accessoaries","categories":[]}]}]}],"products":[{"product":"Gran sofa","category":["Furniture","Sofas"]},{"product":"SLR Camera D200","category":["Electronics","Photo, Video","Digital cameras"]}]}')},bf37:function(e,t,c){e.exports=c.p+"img/close.a3a0784f.svg"},cc2e:function(e,t,c){},cd49:function(e,t,c){"use strict";c.r(t);var s=c("7a23");const r=Object(s["g"])("h1",null,"Filters",-1);function a(e,t,c,a,i,o){const n=Object(s["t"])("BaseFilters"),l=Object(s["t"])("BaseProducts");return Object(s["m"])(),Object(s["f"])(s["a"],null,[r,Object(s["i"])(n,{categories:e.categoriesTree,displayFilterOptions:e.displayFilterOptions,displayFilters:e.displayFilters,"onUpdate:displayFilters":t[0]||(t[0]=t=>e.displayFilters=t),checkedCategories:e.checkedCategories,"onUpdate:checkedCategories":t[1]||(t[1]=t=>e.checkedCategories=t),search:e.search,"onUpdate:search":t[2]||(t[2]=t=>e.search=t)},null,8,["categories","displayFilterOptions","displayFilters","checkedCategories","search"]),Object(s["i"])(l,{products:e.productsMatching},null,8,["products"])],64)}var i=c("9ab4"),o=c("ce1f"),n=c("bf37"),l=c.n(n);const d={class:"filters"},p={key:0,class:"filters__filter"},u=Object(s["g"])("img",{src:l.a},null,-1),h=[u],b={key:1,class:"filters__filter"},g=["value"],O=Object(s["g"])("img",{src:l.a},null,-1),j=[O];function y(e,t,c,r,a,i){const o=Object(s["t"])("BaseSelect"),n=Object(s["t"])("BaseCategoryFilter");return Object(s["m"])(),Object(s["f"])("div",d,[Object(s["i"])(o,{options:e.displayFilterOptions,selectedKeys:e.activeDisplayFilters,onSelect:e.toggleDisplayFilter,class:"filters__filter"},null,8,["options","selectedKeys","onSelect"]),e.activeDisplayFilters.includes("tree")?(Object(s["m"])(),Object(s["f"])("div",p,[Object(s["i"])(n,{tree:e.categories,checkedCategories:e.checkedCategories,onChangeCheckedCategories:t[0]||(t[0]=t=>e.$emit("update:checkedCategories",t))},null,8,["tree","checkedCategories"]),Object(s["g"])("span",{onClick:t[1]||(t[1]=t=>e.cancelFilter("tree")),class:"filters__close"},h)])):Object(s["e"])("",!0),e.activeDisplayFilters.includes("search")?(Object(s["m"])(),Object(s["f"])("div",b,[Object(s["g"])("input",{value:e.search,onInput:t[2]||(t[2]=(...t)=>e.handleSearch&&e.handleSearch(...t))},null,40,g),Object(s["g"])("span",{onClick:t[3]||(t[3]=t=>e.cancelFilter("search")),class:"filters__close"},j)])):Object(s["e"])("",!0)])}c("14d9");var f=c("896a"),m=c.n(f);const v=e=>(Object(s["p"])("data-v-1eccae67"),e=e(),Object(s["n"])(),e),C={class:"select__title"},_=v(()=>Object(s["g"])("img",{src:m.a},null,-1)),k=[_],F=["onClick"];function w(e,t,c,r,a,i){return Object(s["m"])(),Object(s["f"])("div",{class:"select",onClick:t[1]||(t[1]=t=>e.isOpened=!e.isOpened)},[Object(s["g"])("span",C,[Object(s["h"])(Object(s["u"])(e.selectTitle)+" ",1),Object(s["g"])("span",{class:Object(s["l"])(["select__arrow",{"select__arrow--rotate":e.isOpened}])},k,2)]),Object(s["g"])("ul",{onClick:t[0]||(t[0]=Object(s["w"])(()=>{},["prevent","stop"])),class:Object(s["l"])(["select__options",{"select__options--show":e.isOpened}])},[(Object(s["m"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(e.options,t=>(Object(s["m"])(),Object(s["f"])("li",{key:t.key,class:Object(s["l"])(["select__option",{"select__option--selected":e.selectedKeys.includes(t.key)}]),onClick:c=>e.handleSelect(t.key)},Object(s["u"])(t.name),11,F))),128))],2)])}let S=class extends o["b"]{};S=Object(i["a"])([Object(o["a"])({props:{options:{type:Array,required:!0},selectedKeys:{type:Array,required:!0}},emits:["select"],data(){return{isOpened:!1}},computed:{selectTitle(){return this.options.filter(e=>this.selectedKeys.includes(e.key)).map(e=>e.name).join(", ")||"Please, select filters"}},methods:{handleSelect(e){this.$emit("select",e)}}})],S);var D=S,x=(c("af4f"),c("6b0d")),P=c.n(x);const q=P()(D,[["render",w],["__scopeId","data-v-1eccae67"]]);var B=q;const A={class:"tree-select__title"},M=Object(s["g"])("img",{src:m.a},null,-1),T=[M];function $(e,t,c,r,a,i){const o=Object(s["t"])("BaseCategoryFilterItem");return Object(s["m"])(),Object(s["f"])("div",{class:"tree-select",onClick:t[1]||(t[1]=t=>e.isOpened=!e.isOpened)},[Object(s["g"])("span",A,[Object(s["h"])(Object(s["u"])(e.selectTitle)+" ",1),Object(s["g"])("span",{class:Object(s["l"])(["tree-select__arrow",{"tree-select__arrow--rotate":e.isOpened}])},T,2)]),Object(s["g"])("ul",{class:Object(s["l"])(["tree-select__tree",{"tree-select__tree--hide":!e.isOpened}]),onClick:t[0]||(t[0]=Object(s["w"])(()=>{},["stop"]))},[(Object(s["m"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(e.tree,t=>(Object(s["m"])(),Object(s["d"])(o,{class:"tree-select__option",onMouseenter:c=>e.hoveredCategory=t.name,showChildrens:e.hoveredCategory===t.name,depth:1,key:t.name,category:t,checkedCategories:e.checkedCategories,onSelect:e.handleSelect},null,8,["onMouseenter","showChildrens","category","checkedCategories","onSelect"]))),128))],2)])}const I={class:"tree-select__option"},K=["checked"],J={key:0,class:"tree-select__arrow-left"},L=Object(s["g"])("img",{src:m.a},null,-1),U=[L];function E(e,t,c,r,a,i){const o=Object(s["t"])("BaseCategoryFilterItem",!0);return Object(s["m"])(),Object(s["f"])("li",I,[Object(s["g"])("input",{type:"checkbox",checked:e.checkedCategories.includes(e.category.name),onInput:t[0]||(t[0]=t=>e.handleSelect(e.category))},null,40,K),Object(s["h"])(" "+Object(s["u"])(e.category.name)+" ",1),e.category.categories.length?(Object(s["m"])(),Object(s["f"])("span",J,U)):Object(s["e"])("",!0),e.category.categories.length?(Object(s["m"])(),Object(s["f"])("ul",{key:1,class:Object(s["l"])(["tree-select__tree",{"tree-select__tree--depth":e.depth,"tree-select__tree--hide":!e.showChildrens}])},[(Object(s["m"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(e.category.categories,c=>(Object(s["m"])(),Object(s["d"])(o,{class:"tree-select__option",onMouseenter:t=>e.hoveredCategory=c.name,showChildrens:e.hoveredCategory===c.name,depth:e.depth+1,category:c,key:c.name,checkedCategories:e.checkedCategories,onSelect:t[1]||(t[1]=t=>e.handleSelect(t))},null,8,["onMouseenter","showChildrens","depth","category","checkedCategories"]))),128))],2)):Object(s["e"])("",!0)])}let N=class extends o["b"]{};N=Object(i["a"])([Object(o["a"])({props:{category:{type:Object,required:!0},showChildrens:{type:Boolean,required:!0},checkedCategories:{type:Array,required:!0},depth:{type:Number,required:!0}},watch:{showChildrens(e){e||(this.hoveredCategory="")}},emits:["select"],data(){return{hoveredCategory:""}},methods:{handleSelect(e){this.$emit("select",e)}}})],N);var V=N;const G=P()(V,[["render",E]]);var R=G;let z=class extends o["b"]{};z=Object(i["a"])([Object(o["a"])({components:{BaseCategoryFilterItem:R},props:{tree:{type:Array,required:!0},checkedCategories:{type:Array,required:!0}},emits:["changeCheckedCategories"],watch:{isOpened(e){e||(this.hoveredCategory="")}},data(){return{isOpened:!1,hoveredCategory:""}},computed:{selectTitle(){return"Please, select category"}},methods:{handleSelect(e){const t=this.checkedCategories.find(t=>t===e.name);let c=this.checkedCategories;t?c=this.checkedCategories.filter(t=>t!==e.name):c.push(e.name),this.$emit("changeCheckedCategories",c)}}})],z);var H=z;c("8c52");const Q=P()(H,[["render",$]]);var W,X=Q;(function(e){e[e["tree"]=0]="tree",e[e["search"]=1]="search"})(W||(W={}));let Y=class extends o["b"]{};Y=Object(i["a"])([Object(o["a"])({components:{BaseSelect:B,BaseCategoryFilter:X},props:{categories:{type:Array,required:!0},displayFilterOptions:{type:Array,required:!0},checkedCategories:{type:Array,required:!0},search:{type:String,required:!0},displayFilters:{type:Array,required:!0}},created(){this.activeDisplayFilters=this.displayFilters},data(){return{activeDisplayFilters:[]}},emits:["update:search","update:checkedCategories","update:displayFilters"],methods:{toggleDisplayFilter(e){const t=this.activeDisplayFilters.find(t=>e===t);t?this.activeDisplayFilters=this.activeDisplayFilters.filter(t=>t!==e):this.activeDisplayFilters.push(e),this.$emit("update:displayFilters",this.activeDisplayFilters)},handleSearch(e){const{value:t}=e.target;this.$emit("update:search",t)},cancelFilter(e){this.activeDisplayFilters=this.activeDisplayFilters.filter(t=>t!==e),this.$emit("update:displayFilters",this.activeDisplayFilters),"tree"===e?this.$emit("update:checkedCategories",[]):"search"===e&&this.$emit("update:search","")}}})],Y);var Z=Y;c("3b95");const ee=P()(Z,[["render",y]]);var te=ee;const ce={class:"products"};function se(e,t,c,r,a,i){const o=Object(s["t"])("BaseProduct");return Object(s["m"])(),Object(s["f"])("div",ce,[Object(s["g"])("h1",null,"Products: ("+Object(s["u"])(e.products.length)+" items)",1),(Object(s["m"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(e.products,e=>(Object(s["m"])(),Object(s["d"])(o,{class:"products__product",key:e.product,product:e},null,8,["product"]))),128))])}const re={class:"product"},ae={class:"product__name"},ie={class:"product__category"};function oe(e,t,c,r,a,i){return Object(s["m"])(),Object(s["f"])("div",re,[Object(s["g"])("div",ae,Object(s["u"])(e.product.product),1),Object(s["g"])("div",ie,Object(s["u"])(e.product.category.join(", ")),1)])}let ne=class extends o["b"]{};ne=Object(i["a"])([Object(o["a"])({components:{BaseProduct:ne},props:{product:{type:Object,required:!0}}})],ne);var le=ne;const de=P()(le,[["render",oe]]);var pe=de;let ue=class extends o["b"]{};ue=Object(i["a"])([Object(o["a"])({components:{BaseProduct:pe},props:{products:{type:Array,required:!0}}})],ue);var he=ue;c("08e1");const be=P()(he,[["render",se]]);var ge=be,Oe=c("5502");let je=class extends o["b"]{};je=Object(i["a"])([Object(o["a"])({components:{BaseFilters:te,BaseProducts:ge},data(){return{checkedCategories:[],search:"",displayFilters:[],displayFilterOptions:[{key:"tree",name:"Category"},{key:"search",name:"Search"}]}},computed:{...Object(Oe["c"])(["categoriesTree","products","fetching","isFailure"]),productsMatching(){let e=this.products;return this.displayFilters.includes("tree")&&this.checkedCategories.length&&(e=this.products.filter(e=>this.checkedCategories.some(t=>e.category.includes(t)))),e.filter(e=>e.product.toLowerCase().includes(this.search.toLowerCase()))}},methods:{...Object(Oe["b"])(["getData"])},created(){this.getData()}})],je);var ye=je;const fe=P()(ye,[["render",a]]);var me=fe,ve=Object(Oe["a"])({state:{products:[],categoriesTree:[],fetching:!0,isFailure:!1},mutations:{setFetching(e){e.fetching=!1,e.isFailure=!1},setFailure(e){e.fetching=!1,e.isFailure=!0},setData(e,t){e.products=t.products,e.categoriesTree=t.categories,e.fetching=!1}},actions:{getData({commit:e}){e("setFetching"),Promise.all([fetch("/api/products").then(e=>e.json()).then(e=>e),fetch("/api/categories").then(e=>e.json()).then(e=>e)]).then(([t,c])=>{e("setData",{products:t,categories:c})}).catch(()=>{e("setFailure")})}}}),Ce=(c("b383"),c("0c6e")),_e=c("bd24");Object(Ce["a"])({routes(){this.get("/api/categories",()=>_e.categories),this.get("/api/products",()=>_e.products)}}),Object(s["c"])(me).use(ve).mount("#app")}});
//# sourceMappingURL=app.e2838f6a.js.map